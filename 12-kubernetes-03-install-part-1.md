# Домашнее задание к занятию "12.3 Развертывание кластера на собственных серверах, лекция 1"
Поработав с персональным кластером, можно заняться проектами. Вам пришла задача подготовить кластер под новый проект.

## Задание 1: Описать требования к кластеру
Сначала проекту необходимо определить требуемые ресурсы. Известно, что проекту нужны база данных, система кеширования, а само приложение состоит из бекенда и фронтенда. Опишите, какие ресурсы нужны, если известно:

* База данных должна быть отказоустойчивой. Потребляет 4 ГБ ОЗУ в работе, 1 ядро. 3 копии.
* Кэш должен быть отказоустойчивый. Потребляет 4 ГБ ОЗУ в работе, 1 ядро. 3 копии.
* Фронтенд обрабатывает внешние запросы быстро, отдавая статику. Потребляет не более 50 МБ ОЗУ на каждый экземпляр, 0.2 ядра. 5 копий.
* Бекенд потребляет 600 МБ ОЗУ и по 1 ядру на копию. 10 копий.

## Как оформить ДЗ?

Выполненное домашнее задание пришлите ссылкой на .md-файл в вашем репозитории.

План расчета
1. Сначала сделайте расчет всех необходимых ресурсов.
2. Затем прикиньте количество рабочих нод, которые справятся с такой нагрузкой.
3. Добавьте к полученным цифрам запас, который учитывает выход из строя как минимум одной ноды.
4. Добавьте служебные ресурсы к нодам. Помните, что для разных типов нод требовния к ресурсам разные.
5. Рассчитайте итоговые цифры.
6. В результате должно быть указано количество нод и их параметры.


# Ответ

### Проведем расчет всех необходимых для контейнеров ресурсов.

|        | CPU на сервис, шт	 | RAM на сервис, Гб | число копий | 	CPU все ноды, шт | 	RAM все нодыб Гб |
|--------|--------------------|-------------------|-------------|-------------------|-------------------|
| БД	    | 1                  | 	4	               | 3           | 	3                | 	12               |
| КЕШ	   | 1	                 | 4                 | 3           | 	3                | 	12               |
| ФРОНТ  | 	0,2	              | 0,05              | 	5          | 	1                | 	0,25             |
| БЕКЕНД | 	1	                | 0,6               | 	10         | 	10               | 	6                |
| Всего	 |           |                   |             | 21	               | 17          | 	30,25            |                   |

### Прикинем количество рабочих нод, которые справятся с такой нагрузкой.

17 CPU 30,25 Гб RAM, не очень большая нагрузка, с ней справятся 3 ноды по 6 CPU 12 Гб RAM

### Добавим к полученным цифрам запас, который учитывает выход из строя как минимум одной ноды.

Если ноды 3, то выход из строя одной ноды заберет 30%, добавим их для надежности и еще 10% запас, значит всего добавим 40% 

17 + 40% = 23,8 CPU
30,25 + 40% = 42,35 Гб RAM 

### Добавим служебные ресурсы к нодам. Учтем, что для разных типов нод требовния к ресурсам разные.

|                | 	CPU на сервис, шт | 	RAM на сервис, ГБ | 	SSD, ГБ	 | число копий	 | CPU, все ноды, шт	 | RAM все ноды, Гб | 	SSD, Гб |
|----------------|--------------------|--------------------|-----------|--------------|--------------------|------------------|----------|
| Control Plane  | 2                  | 2                  | 50        | 3            | 6                  | 6                | 	150     |
| Worker Node    | 1	                 | 1                  | 100       | 3            | 3	                 | 3                | 300      |                |                  |        |

### Получаем итоговые цифры.

#### Worker Node

23,8 + 3 = 26,8 CPU округляем до целого в + - 27 CPU 

42,35 + 3 = 45,35 Гб RAM округляем до целого в +, кратного 2 и 3 - 48 Гб

100 * 3 = 300 Гб SSD - в задании не обозначено потребление дискового пространства, взял рекомендованное.

#### Control Plane

1 * 3 = 3 CPU 

2 * 3 = 6 Гб RAM

50 * 3 = 150 Гб SSD

### Количество нод и их параметры:

|               | 	CPU на сервис, шт | 	RAM на сервис, ГБ | 	SSD, ГБ	 | число копий	 | CPU, все ноды, шт	 | RAM все ноды, Гб | 	SSD, Гб |
|---------------|--------------------|--------------------|-----------|--------------|--------------------|------------------|----------|
| Control Plane | 2                  | 2                  | 50        | 3            | 6                  | 6                | 	150     |
| Worker Node   | 9                  | 16                 | 100       | 3            | 27	                | 48               | 300     | 
